WindowsのVSCodeで、Github Copilot インストラクションファイルを反映させるには、どこに置けばいいですか？

VSCodeでGitHub Copilotのカスタムインストラクション（指示書）を反映させるには、**「どの範囲で設定を適用したいか」**によって置く場所が2種類あります。

1. 特定のプロジェクト（リポジトリ）だけに適用する場合
そのプロジェクト固有のルール（コーディング規約や使用ライブラリの指定など）を覚えさせたい場合に最適です。

配置場所: プロジェクトのルートディレクトリ（一番上の階層）

ファイル名: .github/copilot-instructions.md

[!TIP] 手順: > 1. プロジェクト内に .github というフォルダを作成します。 2. その中に copilot-instructions.md という名前でファイルを作成し、指示を記述します。

2. すべてのプロジェクトに共通で適用する場合
どのプロジェクトを開いても共通で守ってほしいルール（例：「日本語で回答して」「コメントは多めにして」など）を設定する場合です。

配置場所: ユーザー設定ディレクトリ

ファイル名: copilot-instructions.md

Windowsの場合、具体的には以下のパスになります： %APPDATA%\Code\User\copilot-instructions.md

[!NOTE] エクスプローラーのアドレスバーに %APPDATA%\Code\User\ と貼り付けてエンターキーを押すと、該当のフォルダがすぐに開きます。

インストラクションが反映されているか確認する方法
正しく認識されているか不安な場合は、Copilot Chatに以下のように聞いてみてください。

「現在のカスタムインストラクションの内容を要約して教えてください」

設定が読み込まれていれば、ファイルに記述した内容に基づいた回答が返ってきます。

次に、インストラクションファイルに書くべき具体的なテンプレートや、効果的な書き方のコツについてお伝えしましょうか？

copilot-instructions.mdじゃなくて、AGENTS.mdじゃダメなんだっけ？

結論から言うと、AGENTS.md でも間違いではありませんが、役割が少し異なります。

GitHub Copilot には現在、**「リポジトリ全体の指示」と「特定の役割（エージェント）の指示」**という2つの設定方法があるため、目的に合わせて使い分けるのが正解です。

1. copilot-instructions.md と AGENTS.md の違い
ファイル名	役割・適用範囲	使いどころ
.github/copilot-instructions.md	リポジトリ全体の基本ルール。Copilot Chatを使う際、常に背景知識として参照されます。	命名規則、使用フレームワークの固定、日本語回答の強制など。
.github/copilot/AGENTS.md	特定の「専門家」の定義。Chatで @agent_name と呼び出した時だけ適用されます。	「テストコード作成専門」「リファクタリング専門」など、特定のタスク用。
2. なぜ AGENTS.md が話題になっているのか？
最近、GitHub Copilot に 「カスタムエージェント」 という機能が追加されました。 AGENTS.md を使うと、1つのリポジトリ内に「セキュリティ担当」「DB設計担当」といった複数のキャラクターを同居させることができます。

配置パス: .github/copilot/AGENTS.md

書き方の例:

Markdown
## @reviewer
あなたはコードレビュー専門のエージェントです。
パフォーマンスとセキュリティの観点から厳しくチェックしてください。

## @debugger
あなたはバグ修正の専門家です。
エラーログから原因を特定し、修正案を提示してください。
このように書くと、チャット欄で @reviewer と打つだけで、その指示に基づいた回答が得られるようになります。

結局どちらを使うべき？
「常にこのルールで動いてほしい」 なら： 👉 .github/copilot-instructions.md

「特定の時だけ専門的なアドバイスがほしい（使い分けたい）」 なら： 👉 .github/copilot/AGENTS.md

[!IMPORTANT] 注意点: > 以前は AGENTS.md はプレビュー機能（GitHub Copilot Extensionsなど）の一部でしたが、現在はVSCodeの最新版とCopilotのプランによって利用可否が変わる場合があります。まずは標準的な copilot-instructions.md から始めるのが確実です。

もし特定の役割（例えば「テスト作成専用」など）を作りたいのであれば、AGENTS.md の具体的な書き方を詳しくお教えしましょうか？